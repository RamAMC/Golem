<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Miniaturas</title>
    <style>
      #miniaturas img {
        margin: 5px;
        border: 1px solid black;
      }
    </style>
  </head>
  <body>
    <input type="file" multiple onchange="cargarMiniaturas(event);">
    <div id="miniaturas"></div>
    
    <div>
      <label for="ancho">Ancho:</label>
      <input type="number" id="ancho" value="100">
    </div>
    
    <div>
      <label for="alto">Alto:</label>
      <input type="number" id="alto" value="100">
    </div>
    
    <div>
      <label for="tamano">Tamaño:</label>
      <input type="range" id="tamano" min="10" max="200" value="100">
    </div>
    
    <button onclick="aplicarCambios();">Aplicar cambios</button>
    <button onclick="descargarImagenes();">Descargar imágenes</button>
    
    <script>
      let miniaturas = [];
      
      function cargarMiniaturas(event) {
        const archivos = event.target.files;
        
        for (let i = 0; i < archivos.length; i++) {
          const archivo = archivos[i];
          const lector = new FileReader();
          
          lector.onload = function(event) {
            const imagen = new Image();
            imagen.src = event.target.result;
            imagen.width = 100;
            miniaturas.push(imagen);
            document.getElementById('miniaturas').appendChild(imagen);
          }
          
          lector.readAsDataURL(archivo);
        }
      }
      
      function aplicarCambios() {
        const ancho = document.getElementById('ancho').value;
        const alto = document.getElementById('alto').value;
        const tamano = document.getElementById('tamano').value / 100;
        
        for (let i = 0; i < miniaturas.length; i++) {
          const miniatura = miniaturas[i];
          const canvas = document.createElement('canvas');
          canvas.width = ancho;
          canvas.height = alto;
          
          const contexto = canvas.getContext('2d');
          contexto.drawImage(miniatura, 0, 0, ancho, alto);
          
          miniatura.src = canvas.toDataURL('image/png', tamano);
        }
      }
      
      function descargarImagenes() {
        for (let i = 0; i < miniaturas.length; i++) {
          const miniatura = miniaturas[i];
          const enlace = document.createElement('a');
          enlace.href = miniatura.src;
          enlace.download = 'miniatura_' + i + '.png';
          enlace.click();
        }
      }
    </script>
  </body>
</html>
