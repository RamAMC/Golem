<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Golem de Papel</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="estilos.css"> 
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          fontFamily: {
            sans: ['Roboto', 'system-ui', 'sans-serif']
          }
        }
      }
    }
  </script>
</head>
<body class="bg-stone-100 dark:bg-stone-950 min-h-screen font-sans">
  <header class="flex flex-col items-center mt-8 mb-6 relative">
    <!--<button id="toggleDark" class="absolute right-4 top-2 text-gray-500 hover:text-blue-700 dark:text-gray-300 dark:hover:text-yellow-300 text-lg transition">üåô/‚òÄÔ∏è</button>-->
    <div class="absolute right-4 top-2">
      <label class="relative inline-flex items-center gap-2">
        <!-- Icono del sol -->
        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-yellow-500 dark:text-yellow-900" viewBox="0 0 20 20" fill="currentColor">
          <path fillRule="evenodd" d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z" clipRule="evenodd"/>
        </svg>
        
        <!-- Switch -->
        <div class="relative">
          <input type="checkbox" id="toggleDark" class="sr-only peer">
          <div class="w-11 h-6 bg-blue-200 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600 dark:peer-checked:bg-orange-800 dark:bg-gray-700"></div>
        </div>
        
        <!-- Icono de la luna -->
        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-gray-900 dark:text-gray-300" viewBox="0 0 20 20" fill="currentColor">
          <path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"/>
        </svg>
      </label>
    </div>
    <img src="golem_logo.png" alt="Logo Golem de Papel" class="w-28 h-28 rounded-full shadow mb-2 object-cover" id="logo-img" />
    <a href="https://www.instagram.com/golemdepapel/" target="_blank" rel="noopener" class="flex items-center gap-2 text-blue-700 hover:text-pink-600 text-base font-medium dark:text-purple-400 dark:hover:text-orange-300">
      <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" class="w-6 h-6"><path d="M7.75 2h8.5A5.75 5.75 0 0 1 22 7.75v8.5A5.75 5.75 0 0 1 16.25 22h-8.5A5.75 5.75 0 0 1 2 16.25v-8.5A5.75 5.75 0 0 1 7.75 2zm0 1.5A4.25 4.25 0 0 0 3.5 7.75v8.5A4.25 4.25 0 0 0 7.75 20.5h8.5A4.25 4.25 0 0 0 20.5 16.25v-8.5A4.25 4.25 0 0 0 16.25 3.5zm4.25 3.25a5.25 5.25 0 1 1 0 10.5a5.25 5.25 0 0 1 0-10.5zm0 1.5a3.75 3.75 0 1 0 0 7.5a3.75 3.75 0 0 0 0-7.5zm5.13.62a1.13 1.13 0 1 1-2.25 0a1.13 1.13 0 0 1 2.25 0z"/></svg>
      @golemdepapel
    </a>
  </header>
  <div class="container mx-auto max-w-4xl p-4 bg-white rounded-lg shadow-lg flex flex-col md:flex-row gap-6 dark:bg-stone-900 dark:text-stone-100">
    <div class="flex-1">
      <input type="file" id="fileInput" accept="image/*" multiple class="block w-full mb-4 text-sm text-stone-700 dark:text-stone-300 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-100 file:text-blue-700 hover:file:bg-blue-200 dark:hover:file:bg-orange-900 dark:file:bg-orange-800 dark:file:text-stone-300" />
      <div class="aspect-ratio-controls flex items-center gap-2 mb-4">
        <label for="aspectRatio" class="font-medium dark:text-stone-300">Relaci√≥n de aspecto:</label>
        <select id="aspectRatio" class="border rounded px-2 py-1 dark:bg-stone-700 dark:border-stone-600 dark:text-stone-300">
          <option value="1:1">1:1 (Cuadrado)</option>
          <option value="4:3">4:3</option>
          <option value="3:2">3:2</option>
          <option value="16:9">16:9</option>
        </select>
      </div>
      <div class="bg-stone-50 dark:bg-stone-800 p-3 rounded mb-4 dark:border dark:border-stone-700">
        <div class="flex items-center mb-2">
          <input type="checkbox" id="enableWm" checked class="h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500 dark:bg-stone-700 dark:border-stone-600 dark:checked:bg-orange-600">
          <label for="enableWm" class="ml-2 text-lg font-semibold dark:text-stone-300 tracking-tight">Secuencia (marca de agua)</label>
        </div>

        <div id="watermark-controls">
            <div class="flex flex-col md:flex-row gap-4">
                <!-- Columna de Controles -->
                <div class="flex-1">
                    <div class="flex flex-wrap items-center gap-2 mb-2">
                      <label for="wmSize" class="dark:text-stone-300">Tama√±o (% altura):</label>
                      <input type="range" id="wmSize" min="5" max="20" value="8" class="dark:accent-orange-600 accent-blue-600">
                      <span id="wmSizeVal">8</span>%
                    </div>
                    <div class="flex flex-wrap items-center gap-2 mb-2">
                      <label for="wmColor" class="dark:text-stone-300">Color:</label>
                      <input type="color" id="wmColor" value="#f7f304" class="w-8 h-8 p-0 border-0">
                    </div>
                    <div class="flex flex-wrap items-center gap-2 mb-2">
                      <label for="wmAlpha" class="dark:text-stone-300">Opacidad:</label>
                      <input type="range" id="wmAlpha" min="10" max="100" value="70" class="dark:accent-orange-600 accent-blue-600">
                      <span id="wmAlphaVal">70</span>%
                    </div>
                    <div class="flex flex-wrap items-center gap-2 mb-2">
                      <label for="wmFont" class="dark:text-stone-300">Fuente:</label>
                      <select id="wmFont" class="border rounded px-2 py-1 dark:bg-stone-700 dark:border-stone-600 dark:text-stone-300">
                        <option value="Arial">Arial</option>
                        <option value="Verdana">Verdana</option>
                        <option value="Courier New">Courier New</option>
                        <option value="Times New Roman">Times New Roman</option>
                      </select>
                    </div>
                    <div class="flex flex-wrap items-center gap-2">
                      <label for="wmPos" class="dark:text-stone-300">Posici√≥n:</label>
                      <select id="wmPos" class="border rounded px-2 py-1 dark:bg-stone-700 dark:border-stone-600 dark:text-stone-300">
                        <option value="br">Inferior derecha</option>
                        <option value="bl">Inferior izquierda</option>
                        <option value="tr">Superior derecha</option>
                        <option value="tl">Superior izquierda</option>
                      </select>
                    </div>
                </div>
                <!-- Columna de Preview -->
                <div class="flex-shrink-0">
                    <label class="block text-sm font-medium dark:text-stone-300 mb-1">Vista Previa:</label>
                    <canvas id="wmPreview" width="120" height="120" class="bg-gray-300 dark:bg-stone-600 rounded"></canvas>
                </div>
            </div>
        </div>
      </div>
    </div>
    <aside class="w-full md:w-80 bg-blue-50 border border-blue-200 rounded-lg p-4 h-fit self-start dark:bg-stone-800 dark:border-stone-700 dark:text-blue-100">
      <h2 class="text-xl font-semibold text-blue-800 mb-3 dark:text-orange-300 tracking-tight">¬øC√≥mo funciona?</h2>
      <ol class="list-decimal list-inside space-y-2 text-base text-blue-900 dark:text-orange-200">
        <li><b>Sube tus im√°genes</b> (ordenadas por nombre).</li>
        <li><b>Elige la relaci√≥n de aspecto</b> para recortar todas las im√°genes.</li>
        <li><b>Personaliza la secuencia</b> (marca de agua num√©rica).</li>
        <li><b>Procesa las im√°genes</b> para ver el resultado.</li>
        <li><b>Ajusta el tama√±o y formato final</b> seg√∫n tu preferencia.</li>
        <li><b>Descarga</b> todas las im√°genes procesadas en un ZIP.</li>
      </ol>
    </aside>
  </div>
  <div class="container mx-auto max-w-2xl">
    <div id="previewContainer" class="flex flex-wrap gap-2 justify-center mb-4"></div>
    <div class="actions flex justify-center mb-4">
      <button id="processBtn" disabled class="bg-blue-600 text-white px-6 py-2 rounded shadow hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition dark:bg-orange-800 dark:hover:bg-orange-900">Procesar im√°genes</button>
    </div>
    <div class="output-controls max-w-xl mx-auto bg-stone-50 p-3 rounded mb-4 dark:bg-stone-800 dark:text-stone-100 dark:border dark:border-stone-700">
      <h3 class="text-lg font-semibold mb-2 tracking-tight">Opciones de Salida</h3>
      <div class="flex flex-wrap items-center gap-2 mb-2">
        <label for="outWidth" class="dark:text-stone-300">Ancho final:</label>
        <input type="number" id="outWidth" min="10" max="4096" value="800" class="border rounded px-2 py-1 w-20 dark:bg-stone-700 dark:border-stone-600 dark:text-stone-300">
        <label for="outHeight" class="dark:text-stone-300">Alto final:</label>
        <input type="number" id="outHeight" min="10" max="4096" value="600" class="border rounded px-2 py-1 w-20 dark:bg-stone-700 dark:border-stone-600 dark:text-stone-300">
        <select id="outUnit" class="border rounded px-2 py-1 dark:bg-stone-700 dark:border-stone-600 dark:text-stone-300">
          <option value="px">px</option>
          <option value="mm">mm</option>
        </select>
      </div>
      <div class="flex flex-wrap items-center gap-2 mb-2">
        <label for="outFormat" class="dark:text-stone-300">Formato:</label>
        <select id="outFormat" class="border rounded px-2 py-1 dark:bg-stone-700 dark:border-stone-600 dark:text-stone-300">
          <option value="png">PNG</option>
          <option value="jpeg">JPG</option>
          <option value="webp">WebP</option>
        </select>
      </div>
      <!-- Agregar controles de impresi√≥n -->
      <div class="print-controls border-t dark:border-stone-700 mt-4 pt-4">
        <h4 class="text-base font-semibold mb-2 tracking-tight">Opciones de Impresi√≥n</h4>
        <div class="flex flex-col md:flex-row gap-4">
            <!-- Columna de Controles -->
            <div class="flex-1 space-y-4">
                <div class="flex flex-wrap items-center gap-4">
                  <div class="flex items-center gap-2">
                    <label for="paperSize" class="dark:text-stone-300">Tama√±o de papel:</label>
                    <select id="paperSize" class="border rounded px-2 py-1 dark:bg-stone-700 dark:border-stone-600 dark:text-stone-300">
                      <option value="a4">A4 (210√ó297 mm)</option>
                      <option value="a3">A3 (297√ó420 mm)</option>
                    </select>
                  </div>
                  <div class="flex items-center gap-2">
                    <label for="printLayout" class="dark:text-stone-300">Disposici√≥n:</label>
                    <select id="printLayout" class="border rounded px-2 py-1 dark:bg-stone-700 dark:border-stone-600 dark:text-stone-300">
                      <option value="portrait">Vertical</option>
                      <option value="landscape">Horizontal</option>
                    </select>
                  </div>
                </div>
                <div class="flex flex-wrap items-center gap-4">
                  <div class="flex items-center gap-2">
                    <label for="printMargin" class="dark:text-stone-300">Margen (mm):</label>
                    <input type="number" id="printMargin" min="5" max="50" value="10" class="border rounded px-2 py-1 w-20 dark:bg-stone-700 dark:border-stone-600 dark:text-stone-300">
                  </div>
                  <div class="flex items-center gap-2">
                    <label for="printSpacing" class="dark:text-stone-300">Espacio entre im√°genes (mm):</label>
                    <input type="number" id="printSpacing" min="0" max="50" value="5" class="border rounded px-2 py-1 w-20 dark:bg-stone-700 dark:border-stone-600 dark:text-stone-300">
                  </div>
                </div>
            </div>
            <!-- Columna de Preview -->
            <div class="flex-shrink-0">
                <label class="block text-sm font-medium dark:text-stone-300 mb-1">Vista Previa del Layout:</label>
                <canvas id="pdfLayoutPreview" width="150" height="212" class="bg-white dark:bg-stone-200 rounded border border-stone-400 dark:border-stone-600"></canvas>
            </div>
        </div>
      </div>
    </div>
    <div class="actions flex justify-center gap-4">
      <button id="downloadBtn" disabled class="bg-green-600 text-white px-6 py-2 rounded shadow hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition dark:bg-purple-800 dark:hover:bg-purple-900">Descargar im√°genes</button>
      <button id="printPdfBtn" disabled class="bg-orange-600 text-white px-6 py-2 rounded shadow hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed transition dark:bg-red-800 dark:hover:bg-red-900">Generar PDF</button>
    </div>
  </div>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script src="javascript.js"></script>
</body>
</html>